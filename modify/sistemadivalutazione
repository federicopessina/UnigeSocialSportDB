CREATE TABLE valutazioni_utenti (
    id_utente INT,
    valutazione FLOAT,
    FOREIGN KEY (id_utente) REFERENCES utenti(id_utente)
);

CREATE OR REPLACE FUNCTION aggiorna_valutazione() RETURNS TRIGGER AS $$
BEGIN
    UPDATE valutazioni_utenti SET valutazione = valutazione + 10 WHERE id_utente = NEW.id_utente;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER aggiorna_valutazione_trigger
AFTER INSERT ON iscrizioni_eventi
FOR EACH ROW
EXECUTE FUNCTION aggiorna_valutazione();
